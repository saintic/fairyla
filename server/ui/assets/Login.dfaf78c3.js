import{a0 as e,a1 as o,X as t,V as s,c as l,a,M as i,a2 as r,K as n}from"./vendor.884d25e1.js";const d={name:"Login",data:()=>({logining:!1,loginForm:{username:"",password:""},loginRule:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},checked:!1}),methods:{handleSubmit(e){this.$refs.loginForm.validate((e=>{if(!e)return!1;this.logining=!0,this.$http.post("/auth/signin",{username:this.loginForm.username,password:this.loginForm.password,remember:this.checked}).then((e=>{this.logining=!1,this.$message.success("登录成功"),this.$store.mutations.setLogin(this.loginForm.username,e.data.token),this.$store.actions.saveConfig2Local(),this.$store.actions.fetchConfig();let o=this.$route.query.redirect||"";o.startsWith("/")||(o="/"),this.$router.push({path:o})})).catch((e=>{this.logining=!1}))}))}}},u=r();e("data-v-26f60f2f");const m={class:"login-container"},h=a("h3",{class:"title"},"登录",-1),g=n("记住我"),p=n("忘记密码？"),c=n("登录");o();const f=u(((e,o,r,n,d,f)=>{const w=t("el-input"),b=t("el-form-item"),F=t("el-checkbox"),y=t("el-link"),V=t("el-button"),_=t("el-form");return s(),l("div",m,[a(_,{model:d.loginForm,rules:d.loginRule,"status-icon":"",ref:"loginForm","label-position":"left","label-width":"0px",class:"login-area"},{default:u((()=>[h,a(b,{prop:"username"},{default:u((()=>[a(w,{type:"text",modelValue:d.loginForm.username,"onUpdate:modelValue":o[1]||(o[1]=e=>d.loginForm.username=e),autocomplete:"off",placeholder:"用户名"},null,8,["modelValue"])])),_:1}),a(b,{prop:"password"},{default:u((()=>[a(w,{type:"password",modelValue:d.loginForm.password,"onUpdate:modelValue":o[2]||(o[2]=e=>d.loginForm.password=e),autocomplete:"off",placeholder:"密码","show-password":"",onKeyup:i(f.handleSubmit,["enter","native"])},null,8,["modelValue","onKeyup"])])),_:1}),a(b,null,{default:u((()=>[a(F,{modelValue:d.checked,"onUpdate:modelValue":o[3]||(o[3]=e=>d.checked=e),class:"rememberme"},{default:u((()=>[g])),_:1},8,["modelValue"]),a(y,{type:"info",class:"forgot",href:"https://picbed.pro"},{default:u((()=>[p])),_:1})])),_:1}),a(b,{style:{width:"100%"}},{default:u((()=>[a(V,{type:"primary",style:{width:"100%"},onClick:f.handleSubmit,loading:d.logining},{default:u((()=>[c])),_:1},8,["onClick","loading"])])),_:1})])),_:1},8,["model","rules"])])}));d.render=f,d.__scopeId="data-v-26f60f2f";export default d;
